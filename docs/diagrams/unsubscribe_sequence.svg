<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="466px" preserveAspectRatio="none" style="width:864px;height:466px;background:#FFFFFF;" version="1.1" viewBox="0 0 864 466" width="864px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="26.2969" id="_title" style="stroke:none;stroke-width:1.0;" width="262" x="300" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="252" x="305" y="27.9951">Unsubscribe Sequence Diagram</text><rect fill="#FFFFFF" height="338.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="54" y="83.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="59" y="274.5234"/><rect fill="#FFFFFF" height="200.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="368" y="221.2578"/><rect fill="#FFFFFF" height="34.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="373" y="371.9219"/><rect fill="#FFFFFF" height="338.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="642" y="83.5938"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="647" y="162.9922"/><rect fill="#FFFFFF" height="137.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="809" y="83.5938"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="677" x="10" y="236.2578"/><rect fill="none" height="88.3984" style="stroke:#000000;stroke-width:1.5;" width="497" x="10" y="325.6563"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="59" x2="59" y1="73.5938" y2="431.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="372.5" x2="372.5" y1="73.5938" y2="431.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="647" x2="647" y1="73.5938" y2="431.0547"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="814" x2="814" y1="73.5938" y2="431.0547"/><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="20" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="27" y="62.292">Publisher</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="78" x="20" y="430.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64" x="27" y="450.0498">Publisher</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="328.5" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="335.5" y="62.292">PS_Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="89" x="328.5" y="430.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="75" x="335.5" y="450.0498">PS_Service</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60" x="617" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="624" y="62.292">Broker</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="60" x="617" y="430.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="46" x="624" y="450.0498">Broker</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="770" y="42.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="777" y="62.292">Subscriber</text><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="88" x="770" y="430.0547"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="74" x="777" y="450.0498">Subscriber</text><rect fill="#FFFFFF" height="338.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="54" y="83.5938"/><rect fill="#FFFFFF" height="29.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="59" y="274.5234"/><rect fill="#FFFFFF" height="200.7969" style="stroke:#181818;stroke-width:1.0;" width="10" x="368" y="221.2578"/><rect fill="#FFFFFF" height="34.1328" style="stroke:#181818;stroke-width:1.0;" width="10" x="373" y="371.9219"/><rect fill="#FFFFFF" height="338.4609" style="stroke:#181818;stroke-width:1.0;" width="10" x="642" y="83.5938"/><rect fill="#FFFFFF" height="58.2656" style="stroke:#181818;stroke-width:1.0;" width="10" x="647" y="162.9922"/><rect fill="#FFFFFF" height="137.6641" style="stroke:#181818;stroke-width:1.0;" width="10" x="809" y="83.5938"/><polygon fill="#181818" points="630,100.7266,640,104.7266,630,108.7266,634,104.7266" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="64" x2="636" y1="104.7266" y2="104.7266"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="71" y="99.6606">1</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="84" y="99.6606">data</text><polygon fill="#181818" points="797,129.8594,807,133.8594,797,137.8594,801,133.8594" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="652" x2="803" y1="133.8594" y2="133.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="659" y="128.7935">2</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="672" y="128.7935">data</text><polygon fill="#181818" points="668,158.9922,658,162.9922,668,166.9922,664,162.9922" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="662" x2="808" y1="162.9922" y2="162.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="674" y="157.9263">3</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120" x="687" y="157.9263">Unsubscribe(topic)</text><line style="stroke:#181818;stroke-width:2.0;" x1="791" x2="801" y1="187.125" y2="197.125"/><line style="stroke:#181818;stroke-width:2.0;" x1="791" x2="801" y1="197.125" y2="187.125"/><line style="stroke:#181818;stroke-width:1.0;" x1="657" x2="796" y1="192.125" y2="192.125"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="664" y="187.0591">4</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="677" y="187.0591">data</text><polygon fill="#181818" points="389,217.2578,379,221.2578,389,225.2578,385,221.2578" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="383" x2="641" y1="221.2578" y2="221.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="395" y="216.1919">5</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232" x="408" y="216.1919">PubSubAction::UNSUBSCRIBE(topic)</text><line style="stroke:#A80036;stroke-width:2.0;" x1="805" x2="823" y1="212.2578" y2="230.2578"/><line style="stroke:#A80036;stroke-width:2.0;" x1="805" x2="823" y1="230.2578" y2="212.2578"/><path d="M10,236.2578 L74,236.2578 L74,243.3906 L64,253.3906 L10,253.3906 L10,236.2578 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="75.3984" style="stroke:#000000;stroke-width:1.5;" width="677" x="10" y="236.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19" x="25" y="249.3247">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="110" x="89" y="248.4683">[topic subs == 0]</text><polygon fill="#181818" points="80,270.5234,70,274.5234,80,278.5234,76,274.5234" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="74" x2="367" y1="274.5234" y2="274.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="86" y="269.4575">6</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267" x="99" y="269.4575">ManagementCB(topic, TopicAction::STOP)</text><line style="stroke:#181818;stroke-width:2.0;" x1="624" x2="634" y1="298.6563" y2="308.6563"/><line style="stroke:#181818;stroke-width:2.0;" x1="624" x2="634" y1="308.6563" y2="298.6563"/><line style="stroke:#181818;stroke-width:1.0;" x1="64" x2="629" y1="303.6563" y2="303.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="71" y="298.5903">7</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="29" x="84" y="298.5903">data</text><path d="M10,325.6563 L87,325.6563 L87,332.7891 L77,342.7891 L10,342.7891 L10,325.6563 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="88.3984" style="stroke:#000000;stroke-width:1.5;" width="497" x="10" y="325.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="32" x="25" y="338.7231">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="123" x="102" y="337.8667">[while topic exists]</text><line style="stroke:#181818;stroke-width:1.0;" x1="378" x2="425" y1="358.9219" y2="358.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="425" x2="425" y1="358.9219" y2="371.9219"/><line style="stroke:#181818;stroke-width:1.0;" x1="384" x2="425" y1="371.9219" y2="371.9219"/><polygon fill="#181818" points="394,367.9219,384,371.9219,394,375.9219,390,371.9219" style="stroke:#181818;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="390" y="353.856">8</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="403" y="353.856">topic timeout?</text><polygon fill="#181818" points="75,402.0547,65,406.0547,75,410.0547,71,406.0547" style="stroke:#181818;stroke-width:1.0;"/><line style="stroke:#181818;stroke-width:1.0;" x1="69" x2="367" y1="406.0547" y2="406.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="9" x="81" y="400.9888">9</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="267" x="94" y="400.9888">ManagementCB(topic, TopicAction::STOP)</text><!--MD5=[0e87662d8acaeb9b18bdb74f4aebf6aa]
@startuml unsubscribe sequence diagram
title Unsubscribe Sequence Diagram
autonumber
activate Publisher
participant PS_Service
activate Broker
activate Subscriber

Publisher -> Broker : data
Broker -> Subscriber : data
Subscriber -> Broker : Unsubscribe(topic)
activate Broker
Broker ->x Subscriber: data
Broker - -> PS_Service : PubSubAction::UNSUBSCRIBE(topic)
deactivate Broker
destroy Subscriber
activate PS_Service
alt topic subs == 0
    PS_Service -> Publisher : ManagementCB(topic, TopicAction::STOP)
    activate Publisher
    Publisher ->x Broker : data
    deactivate Publisher
end
loop while topic exists
    PS_Service -> PS_Service : topic timeout?
    activate PS_Service
    PS_Service -> Publisher : ManagementCB(topic, TopicAction::STOP)
    deactivate PS_Service
end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 10:01:30 PDT 2022)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: null
--></g></svg>